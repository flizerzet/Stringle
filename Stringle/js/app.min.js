(()=>{"use strict";const e=document.body,t=document.querySelector(".search-header");t&&t.querySelector(".search-header__btn__wrapper").addEventListener("click",(e=>{t.classList.toggle("active"),t.querySelector(".search-header__btn").classList.toggle("active"),document.querySelector(".search-header__input").classList.toggle("active")}));let s=new Date;const l=s.getFullYear(),c=s.getDate(),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][s.getDay()],a=`${c} ${["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()]} ${l}, ${i}`;document.querySelector(".header__date").textContent=a;const r=document.querySelectorAll(".result__progress");r&&r.forEach((e=>{const t=e.querySelector("progress"),s=e.querySelector(".result__progress_value");s&&(s.textContent=100*t.value+"%"),t.value<=.25&&e.classList.add("_red")}));const o=document.querySelector(".header__user"),n=document.querySelector(".user-menu"),d=document.querySelector(".user-menu__close");o&&n&&(o.addEventListener("click",(()=>{n.classList.toggle("_active"),e.classList.toggle("_lock")})),d.addEventListener("click",(()=>{n.classList.remove("_active"),e.classList.remove("_lock")})));const u=document.body;!function(){let e=document.querySelector(".menu__icon"),t=document.querySelector(".menu");e&&t&&(e.onclick=()=>{e.classList.toggle("_active"),t.classList.toggle("_active"),u.classList.toggle("_locked")},t.addEventListener("click",(s=>{s.target.closest(".menu__body")||(e.classList.remove("_active"),t.classList.remove("_active"),u.classList.remove("_locked"))})))}(),new class{constructor(e,t){this.elem=document.querySelector(e),this.options=t,this.selectedID=t.selectedID,this.#e(),this.#t(),console.log(this.current)}#e(){const{placeholder:e,data:t}=this.options;this.elem.classList.add("select"),this.elem.innerHTML=((e=[],t,s)=>{let l=t??"Placeholder по умолчанию";const c=e.map((e=>{let t="";return e.id===s&&(l=e.value,t="_selected"),`\n\t\t\t<li class="select__item ${t}" data-type="item" data-id="${e.id}">${e.value}</li>\n\t\t`}));return`\n\t\t<div class="select__body">\n\t\t\t<div class="select__input" data-type="input">\n\t\t\t\t<span data-type="value">${l}</span>\n\t\t\t\t<div class="select__icon _icon-dropdown-arrow"></div>\n\t\t\t</div>\n\t\t\t<div class="select__dropdown">\n\t\t\t\t<ul class="select__list">\n\t\t\t\t\t${c.join("")}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t`})(t,e,this.selectedID)}#t(){this.clickHandler=this.clickHandler.bind(this),this.elem.addEventListener("click",this.clickHandler),this.elemValue=this.elem.querySelector('[data-type="value"]')}clickHandler(e){const{type:t}=e.target.dataset;if("input"===t||"value"===t||e.target.closest(".select__icon"))this.toggle();else if("item"===t){const t=e.target.dataset.id;this.select(t)}else"backdrop"===t&&this.close()}get isOpen(){return this.elem.classList.contains("_open")}get current(){return this.options.data.find((e=>e.id===this.selectedID))}toggle(){this.isOpen?this.close():this.open()}select(e){this.selectedID=e,this.elemValue.textContent=this.current.value,this.elem.querySelectorAll('[data-type="item"]').forEach((e=>e.classList.remove("_selected"))),this.elem.querySelector(`[data-id="${e}"]`).classList.add("_selected"),this.options.onSelect&&this.options.onSelect(this.current),this.close()}open(){this.elem.classList.add("_open")}close(){this.elem.classList.remove("_open")}destoy(){this.elem.removeEventListener("click",this.clickHandler),this.elem.innerHTML=""}}("._select",{placeholder:"Select interval",selectedID:"1",data:[{id:"1",value:"Last Week"},{id:"2",value:"Last Month"},{id:"3",value:"Last Day"}],onSelect(e){console.log("Selected item: ",e)}})})();